# ~/.dotfiles/zsh/zshrc -- sourced by ~/.zshrc (symlinked)
# -------------------------------------------------------

# PATH
export PATH="$HOME/bin:$HOME/.local/bin:$PATH"

# History
HISTFILE="${ZDOTDIR:-$HOME}/.zsh_history"
HISTSIZE=50000
SAVEHIST=50000
setopt INC_APPEND_HISTORY
setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_REDUCE_BLANKS

# General options
setopt AUTO_CD
setopt CORRECT
setopt NO_CLOBBER

# Pager
export LESS="-R --mouse"
export PAGER="less"

# fzf defaults
export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'
export FZF_DEFAULT_OPTS='--height 40% --layout=reverse --border --info=inline'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
export FZF_ALT_C_COMMAND='fd --type d --hidden --follow --exclude .git'

# fzf keybindings and completion
if [[ -f "$HOMEBREW_PREFIX/opt/fzf/shell/completion.zsh" ]]; then
  source "$HOMEBREW_PREFIX/opt/fzf/shell/completion.zsh"
fi
if [[ -f "$HOMEBREW_PREFIX/opt/fzf/shell/key-bindings.zsh" ]]; then
  source "$HOMEBREW_PREFIX/opt/fzf/shell/key-bindings.zsh"
fi

# direnv hook
if command -v direnv &>/dev/null; then
  eval "$(direnv hook zsh)"
fi

# thefuck alias
if command -v thefuck &>/dev/null; then
  eval "$(thefuck --alias)"
fi

# Source additional config
source "$HOME/.dotfiles/zsh/exports.zsh"
source "$HOME/.dotfiles/zsh/aliases.zsh"
